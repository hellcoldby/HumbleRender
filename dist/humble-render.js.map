{"version":3,"file":"humble-render.js","sources":["../src/tools/env.js","../src/tools/guid.js","../src/tools/dpr.js","../src/view/CanvasLayer.js","../src/view/CanvasPainter.js","../src/model/Storage.js","../src/control/EventProxy.js","../src/tools/comon_util.js","../src/control/event_simulation.js","../src/animation/GlobalAnimationMgr.js","../src/entry.js"],"sourcesContent":["/*\n *  检测设备支持情况\n */\nlet env = {};\n\n\n//tools --- 浏览器环境检测\nfunction detect(ua) {\n    let os = {};\n    let browser = {};\n\n    let firefox = ua.match(/Firefox\\/([\\d.]+)/);\n    let ie = ua.match(/MSIE\\s[\\d.]+/) || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);  // ie7 || ie11\n    let edge = ua.match(/Edge\\/([\\d.]+)/) // ie12 +\n    let weChat = (/micromessenger/i).test(ua);\n\n    if(firefox){\n        browser.firefox = true;\n        browser.version = firefox[1];\n    }\n\n    if(ie){\n        browser.ie = true;\n        browser.version = ie[1];\n    }\n\n    if(edge) {\n        browser.edge = true;\n        browser.version = edge[1];\n    }\n\n    if (weChat) {\n        browser.weChat = true;\n    }\n\n    return {\n        browser : browser,\n        os: os,\n        node: false,\n        canvasSupported: !!document.createElement('canvas').getContext,\n        svgSupported: typeof SVGRect !== 'undefined',\n        touchEventsSupported: 'ontouchstart' in window && !browser.ie && !browser.edge,\n        pointerEventsSupported: 'onpointerdown' in window  &&  (browser.edge || (browser.ie && browser.version >= 11)),\n        domSupported: typeof document !== 'undefined'\n    }\n\n}\n\nif (typeof wx === \"object\" && typeof wx.getSystemInfoSync === \"function\") {\n    // 判断微信环境\n    env = {\n        browser: {},\n        os: {},\n        node: false,\n        wxa: true, // Weixin Application\n        canvasSupported: true,\n        svgSupported: false,\n        touchEventsSupported: true,\n        domSupported: false\n    };\n} else if (typeof document === \"undefined\" && typeof self !== \"undefined\") {\n    // web worker 环境\n    env = {\n        browser: {},\n        os: {},\n        node: false,\n        worker: true,\n        canvasSupported: true,\n        domSupported: false\n    };\n} else if(typeof navigator === 'undefined') {\n    // node 环境\n    env = {\n        browser: {},\n        os: {},\n        node: true,\n        worker: false,\n        // Assume canvas is supported\n        canvasSupported: true,\n        svgSupported: true,\n    }\n}else {\n    //浏览器环境检测\n    env = detect(navigator.userAgent); \n}\n\n\nexport default env;","/*\n * 生成唯一 id\n */\n\n let idStart = 0x0907;\n\n export default function() {\n     return idStart ++;\n }","var dpr = 1;\n\n// If in browser environment\nif (typeof window !== 'undefined') {\n    dpr = Math.max(window.devicePixelRatio || 1, 1);\n}\n\n/**\n * Debug log mode:\n * 0: Do nothing, for release.\n * 1: console.error, for debug.\n */\nexport var debugMode = 0;\n// retina 屏幕优化\nexport var devicePixelRatio = dpr;\n","\n\nexport default class CanvasLayer {\n    constructor(root, width, height, dpr, id){\n        Object.assign(this, {root, width, height, dpr, id});\n        \n\n    }\n}","import {devicePixelRatio} from '../tools/dpr';\nimport CanvasLayer from './CanvasLayer';\n\nconst CANVAS_QLEVEL = 314159; //图层id;\nclass CanvasPainter{\n    constructor(root, storage, opts={}){\n        this.opts = Object.assign({}, opts);\n        this.root = root;\n        this.storage = storage;\n\n        this.type = 'canvas';\n        this.dpr = this.opts.devicePixelRatio || devicePixelRatio; //分辨率\n\n        let layer_id_list = (this._layer_id_list = []);\n        let layers = this._layers = {}; // 图层 对象列表\n        this._layerConfig = {}; //?\n\n        this._needsManuallyCompositing = false; //?\n        this._hoverlayer = null;  //?\n\n        this._singleCanvas = !this.root.nodeName || this.root.nodeName.toUpperCase() === 'CANVAS'; //根节点canvas\n\n\n        if(this._singleCanvas){ // 如果根节点是一个canvas\n            let width = this.root.width;\n            let height = this.root.height;\n\n            if(this.opts.width){\n                this._width = width = this.opts.width;\n            }\n            if(this.opts.height){\n                this._height = height = this.opts.height;\n            }\n            \n            this.root.width = this.dpr * width; //修正retina 屏幕的分辨率\n            this.root.height = this.dpr * height;\n\n            //为单一画布创建图层\n            let mainLayer = new CanvasLayer(this.root, this._width, this._height, this.dpr, CANVAS_QLEVEL);\n            mainLayer.__builtin__ = true;\n            \n            layers[CANVAS_QLEVEL] = mainLayer;\n            layer_id_list.push(CANVAS_QLEVEL);\n            this._root = root;\n            \n        }else{ //根节点不是canvas, 动态创建一个div包裹\n            this._width = this._getStyle(this.root, 'width');\n            this._height = this._getStyle(this.root, 'height');\n\n            let canvasCon = this._createDomRoot(this._width, this._height);\n            this._root = canvasCon;\n            this.root.appendChild(canvasCon);\n        }\n\n\n\n    }\n\n\n    //tools--动态创建 根节点\n    _createDomRoot(width, height){\n        let oDiv = document.createElement('div');\n        oDiv.style.cssText = [\n            `position: relative`,\n            `width: ${width}px`,\n            `height: ${height}px`,\n            `padding: 0`,\n            `margin: 0`,\n            `border-width: 0`,\n            `background: #067`\n        ].join(';') +';';\n        return oDiv;\n    }\n\n\n    //tools--获取真实样式\n    _getStyle(obj, attr){\n       let opts = this.opts;\n       if(attr in opts){\n           return parseFloat(opts[attr]);\n       }else{\n           let res =  obj.currentStyle? obj.currentStyle[attr] : getComputedStyle(obj, false)[attr];\n           return parseInt(res, 10);\n       }\n\n    }\n}\n\nexport default CanvasPainter;","/**\n * \n * 内容仓库 (M)，用来存储和管理画布上的所有对象，同时提供绘制和更新队列的功能。\n * 需要绘制的对象首先存储在 Storage 中，然后 Painter 类会从 Storage 中依次取出进行绘图。\n * 利用 Storage 作为内存中转站，对于不需要刷新的对象可以不进行绘制，从而可以提升整体性能。\n * \n */\n\n\nclass Storage {\n    constructor(){\n\n    }\n}\n\nexport default Storage;","/*\n * 拦截浏览器默认事件，用自定义事件来代替\n */\nexport default class EventProxy {\n    constructor(root) {}\n}\n","/*\n * common_util常用的 工具函数集合\n * 1. requestAnimationFrame\n */\n\nexport let RAF = (\n    typeof window !== 'undefined'\n    && ( \n        (window.requestAnimationFrame && window.requestAnimationFrame.bind(window))\n        || (window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window))\n        || window.mozRequestAnimationFrame\n        || window.webkitRequestAnimationFrame\n    )\n) || function(fn) { setTimeout(fn, 16) }\n","/*\n *\n * event_simulation(事件模拟) 为不支持事件的类提供事件支持\n */\n\n class Eventful {\n     constructor(eventProcessor) {\n        this._$handlers = {};  \n        this._$eventProcessor = eventProcessor;\n     }\n\n     /**\n      * 绑定一个事件控制器\n      *\n      * @param {String} event 事件名称\n      * @param {String | Object} query 事件过滤器条件\n      * @param {Function} handler 事件控制器\n      * @param {Object} context \n      */\n     on(event, query, handler, context) {\n        return on(this, event, query, handler, context, false);\n     }\n\n     once(event, query, handler, context) {\n         return on(this, event, query, handler, context, true);\n     }\n }\n\n\n //tools -- 解析参数\n function normalizeQuery(host, query) {\n    let eventProcessor = host._$eventProcessor;\n    if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\n        query = eventProcessor.normalizeQuery(query);\n    }\n    return query;\n}\n\n\n//tools -- \nfunction callListenerChanged(eventful, eventType) {\n    let eventProcessor = eventful._$eventProcessor;\n    if (eventProcessor && eventProcessor.afterListenerChanged) {\n        eventProcessor.afterListenerChanged(eventType);\n    }\n}\n\n\n\n //tools -- 绑定事件\n function on(eventful, event, query, handler, context, isOnce) {\n    let _h = eventful._$handlers;\n\n    //参数自适应 \n    if (typeof query === 'function') { \n        context = handler;\n        handler = query;\n        query = null;\n    }\n\n    if(!handler || !event){\n        return eventful\n    }\n\n    query = normalizeQuery(eventful, query);\n\n    if (!_h[event]) {\n        _h[event] = [];\n    }\n\n    for (let i = 0; i < _h[event].length; i++) {\n        if (_h[event][i].h === handler) {\n            return eventful;\n        }\n    }\n    \n    let wrap = {\n        h: handler,\n        one: isOnce,\n        query: query,\n        ctx: context || eventful,\n        callAtLast: ''\n    }\n\n    let lastIndex = _h[event].length - 1;\n    let lastWrap = _h[event][lastIndex];\n    if(lastWrap && lastWrap.callAtLast){\n        _h[event].splice(lastIndex, 0, wrap)\n    }else{\n        _h[event].push(wrap);\n    }\n\n    callListenerChanged(eventful, event);\n    return eventful;\n }\n export default Eventful;","import { RAF } from \"../tools/comon_util\";\nimport Eventful from '../control/event_simulation';\n\nclass GlobalAnimationMgr extends Eventful {\n    constructor(opts) {\n        super(); //调用父类的\n        opts = opts || {};\n        this._running = false; //动画启动开关\n        this._timestamp; //时间戳(记录动画启动时间)\n        this._pause ={\n            duration : 0,  //暂停持续时间\n            start: 0, //暂停时间戳\n            flag: false //暂停开关标记\n        };\n        this._animatableMap = new Map(); //动画对象列表\n    }\n\n    //启动动画\n    start() {\n        this._pause.duration = 0;\n        this._timestamp = new Date().getTime();\n        this._startLoop();\n    }\n\n    //暂停动画\n    pause() {\n        if (!this._pause.flag) {\n            this._pause.start = new Date().getTime();\n            this._pause.flag = true; //暂停\n        }\n    }\n\n    // RAF (requestAnimationFrame) 递归执行动画\n    _startLoop() {\n        let self = this;\n        this._running = true;\n        function nextFrame() {\n            if (self._running) {\n                RAF(nextFrame);\n                !self._pause.flag && self._update();\n            }\n        }\n        RAF(nextFrame);\n    }\n\n    //\n    _update() {\n        let time = new Date().getTime() - this._pause.duration;\n        let delta = time - this._timestamp;\n        \n        this._timestamp = time;\n\n    }\n\n    //向动画列表中增加 动画方案（特征）\n    addAnimatable(animatable) {\n        this._animatableMap.set(animatable.id, animatable);\n    }\n\n    //从动画列表中移除 动画方案（特征）\n    removeAnimatable(animatable) {\n        this._animatableMap.delete(animatable.id);\n    }\n}\n\n\n\nexport default GlobalAnimationMgr;","/*\n *  注释:toos --- 表示是被其他函数引用 的工具函数\n */\n\nimport env from \"./tools/env\";\nimport guid from \"./tools/guid\";\nimport CanvasPainter from \"./view/CanvasPainter\";  //视图 view\nimport Storage from './model/Storage'; // 数据模型  model\nimport EventProxy from './control/EventProxy';\nimport GlobalAnimationMgr from './animation/GlobalAnimationMgr'; //动画\n\n\n//检测浏览器的支持情况\nif (!env.canvasSupported) {\n    throw new Error(\"Need Canvas Environment\");\n}\n\n//tools -- 初始保存实例 map\nlet instances = {};\n\n//tools -- 图形环境 map\nlet painterMap = {\n    canvas: CanvasPainter\n};\n\nexport let version = \"1.0.0\";\n\n/**\n *  main 初始化生成 绘图环境的实例\n *\n * @export\n * @param {DOM | Canvas | Context} root\n * @param {Object} opts\n */\nexport function init(root, opts) {\n    let hr = new HumbleRender(root, opts);\n    instances[hr.id] = hr;\n    return hr;\n}\n\n//tools --- 初始化图形环境\nclass HumbleRender {\n    constructor(root, opts={}) {\n        this.id = guid();\n        this.root = root;\n        let self = this;\n\n        this.storage = new Storage();\n\n        let renderType = opts.render;\n        if (!renderType || !painterMap[renderType]) {\n            renderType = \"canvas\";\n        }\n\n        //生成视图实例\n        this.painter = new painterMap[renderType](this.root, this.storage, opts, this.id);\n\n        //对浏览器默认事件拦截， 做二次处理\n        let handerProxy = null;\n        if (typeof this.root.moveTo !== \"function\") {\n            if (!env.node && !env.worker && !env.wxa) {\n                handerProxy = new EventProxy(this.painter.root);\n            }\n        }\n\n        //生成事件实例\n        // this.eventHandler = new HRenderEventHandler(this.storage, this.painter, handerProxy);\n\n        //生成动画实例\n        this.globalAnimationMgr = new GlobalAnimationMgr();\n        this.globalAnimationMgr.on('frame', function() {\n            self.flush();\n        });\n        this.globalAnimationMgr.start();\n\n        this._needRefresh = false;\n    }\n\n    //获取图形实例唯一id\n    getId(){\n        return this.id;\n    }\n\n    //添加元素\n    add(ele){\n        // this.storage.addToRoot(ele)\n        this.refresh();\n    }\n\n    //移除元素\n    remove(ele){\n        // this.storage.delFromRoot(ele);\n        this.refresh();\n    }\n\n    refresh(){\n        this._needRefresh = true;\n    }\n\n    //刷新 canvas 画面\n    flush() {\n        //全部重绘\n        if(this._needRefresh) {\n            // this.refreshImmediately();\n        }\n        //重绘特定元素\n        if(this._needRefreshHover){\n            // this.refreshHoverImmediaterly();\n        }\n    }\n}\n"],"names":["env"],"mappings":"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"}